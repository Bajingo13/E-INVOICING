<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Invoice List | E-Invoicing</title>

  <!-- REQUIRED: dashboard navbar + page header styles -->
  <link rel="stylesheet" href="/css/navbar.css" />

  <!-- Page styles -->
  <link rel="stylesheet" href="invoice-list.css" />

  <link href="https://cdn.jsdelivr.net/npm/remixicon/fonts/remixicon.css" rel="stylesheet">
</head>

<body>
  <!-- Navbar + Page Header injected here -->
  <div id="navbarMount"></div>

  <!-- Page content -->
  <main class="page-body">
    <!-- Status Tabs -->
    <div class="invoice-filters" role="tablist" aria-label="Invoice status filters">
      <button class="filter-tab active" data-status="all" role="tab" aria-selected="true">
        All <span id="count-all">(0)</span>
      </button>
      <button class="filter-tab" data-status="draft" role="tab" aria-selected="false">
        Draft <span id="count-draft">(0)</span>
      </button>
      <button class="filter-tab" data-status="pending" role="tab" aria-selected="false">
        Pending <span id="count-pending">(0)</span>
      </button>
      <button class="filter-tab" data-status="approved" role="tab" aria-selected="false">
        Approved <span id="count-approved">(0)</span>
      </button>
      <button class="filter-tab" data-status="paid" role="tab" aria-selected="false">
        Paid <span id="count-paid">(0)</span>
      </button>
      <button class="filter-tab" data-status="returned" role="tab" aria-selected="false">
        Returned <span id="count-returned">(0)</span>
      </button>
      <button class="filter-tab" data-status="void" role="tab" aria-selected="false">
        Void <span id="count-void">(0)</span>
      </button>
    </div>

    <!-- Search --> 
    <div class="search-container">
      <input type="text" id="searchInput" placeholder="Search by invoice number or client..." />
    </div>
<section class="filters-card" aria-label="Date range filter">
  <div class="filters-head">
    <div class="filters-title">
      <div class="filters-label">Date Range</div>
      <div id="dateRangeChip" class="range-chip" style="display:none;"></div>
    </div>

    <div class="filters-presets" role="group" aria-label="Date presets">
      <button type="button" class="preset-btn" data-preset="thisMonth">This Month</button>
      <button type="button" class="preset-btn" data-preset="lastMonth">Last Month</button>
      <button type="button" class="preset-btn" data-preset="thisYear">This Year</button>
    </div>
  </div>

  <div class="filters-grid">
    <div class="field">
      <label for="from-date">From</label>
      <input type="date" id="from-date" />
    </div>

    <div class="field">
      <label for="to-date">To</label>
      <input type="date" id="to-date" />
    </div>

    <div class="field actions">
      <button id="clearDateFilter" type="button" class="btn btn-secondary" disabled>
        Clear
      </button>
    </div>
  </div>
</section>

    <!-- Bulk actions -->
    <div class="bulk-actions">
      <button id="deleteSelectedBtn" class="btn btn-danger">
        <i class="ri-delete-bin-6-line"></i> Delete Selected
      </button>

        <!-- dropdown injected by JS -->
      </div>
    </div>

    <!-- Table -->
    <table id="invoiceTable">
      <thead>
        <tr>
          <th><input type="checkbox" id="selectAllInvoices" /></th>
          <th data-sort="invoice_no" class="sortable">Invoice No</th>
          <th data-sort="bill_to" class="sortable">Client</th>
          <th data-sort="date" class="sortable">Date</th>
          <th data-sort="due_date" class="sortable">Due Date</th>
          <th>Total</th>
          <th data-sort="status" class="sortable">Status</th>
          <th>Actions</th>
        </tr>
      </thead>
      <tbody></tbody>
    </table>
  </main>

  <!-- Page header content (the white bar under purple navbar) -->
  <script>
    window.pageConfig = {
      title: "Invoice List",
      subtitle: "View, filter, approve, export, and manage invoice statuses.",
      breadcrumb: [
        { label: "Home", href: "/dashboard" },
        { label: "Invoice List" }
      ],
      actionsHTML: `
  <div class="page-actions">
    <a class="btn btn-primary nav-link-btn" href="/import.html">
      <i class="ri-upload-2-line"></i> Import
    </a>

    <div class="dropdown">
      <button id="exportBtnTop" type="button" class="btn btn-outline">
        <i class="ri-download-2-line"></i> Export
      </button>

      <!-- This MUST exist so JS can inject the items -->
      <div id="exportMenuTop" class="dropdown-menu"></div>
    </div>
  </div>
`
    };
  </script>

  <!-- MUST match dashboard load order -->
  <script src="/js/navbar.js"></script>
  <script src="/js/layout.js"></script>

  <!-- Your page logic -->
  <script type="module" src="invoice-list.js"></script>
</body>
</html>
